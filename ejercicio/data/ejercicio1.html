<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Demo Jquery</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
  </head>

  <body>
      <h1>Ejemplo de Uso de Jquery</h1>

      <div id="mensajeFinal">
      </div>
      
      <button type="submit" id="obtenerInformacion">Obtener información</button>
      <button type="submit" id="limpiarInformacion">Limpiar información</button>
  </body>

  <script>
    $(document).ready(function() {
      var url = "https://raw.githubusercontent.com/PlataformasWeb-P-AA2025/clase03-1bim-nahomi2004/refs/heads/main/ejercicio/data/data_instituciones.json";
      $( "#obtenerInformacion" ).click(function() {
            $.ajax({
              dataType: 'json',
              url: url 
            }).then(function(data) {

              // Cambiar el nombre de la key 
              // lo saque de https://www-geeksforgeeks-org.translate.goog/rename-object-key-in-javascript/?_x_tr_sl=en&_x_tr_tl=es&_x_tr_hl=es&_x_tr_pto=tc 
              nuevaData = data.map(function (obj) {

                  // Assign new key
                  obj['Nombre_Educativa'] = obj['Nombre-Educativa']; 

                  // Delete old key
                  delete obj['Nombre-Educativa']; 

                  return obj;
              });

              for(var i=0; i<data.length; i++){
                console.log(nuevaData[i]);
                console.log(data[i].AMIE);
                console.log(nuevaData[i].Nombre_Educativa);
                console.log(data[i].Provincia);
                console.log(data[i].Canton);
                console.log(data[i].Parroquia);
                console.log(data[i].ZonaAdministrativa);
                console.log(data[i].CodigoDistrito);
                console.log(data[i].Sostenimiento);
                console.log(data[i].RegimenEscolar );
                console.log(data[i].Modalidad);
                console.log(data[i].Jornada);
                console.log(data[i].Nivel);
                console.log(data[i].Etnia);
                console.log(data[i].Numeroestudiantes);
                console.log(data[i].Numerodocentes);
                console.log(data[i].Estado);

                $('#mensajeFinal').append("<p> <b>Nombre Institucion:</b> "+ nuevaData[i].Nombre_Educativa + " <b>Provincia:</b> " + nuevaData[i].Provincia + " <b>Provincia:</b> " + nuevaData[i].Sostenimiento + " <b>Num Estudiantes:</b> " + nuevaData[i].Numeroestudiantes + "</p>");
              }
            });      
      });
      
      $( "#limpiarInformacion" ).click(function() {
          $('#mensajeFinal').empty();
      });
    });
  </script>
</html>
